<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Customer Registration - Loyalty Program</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
</head>
<body class="bg-gray-50">
  <header class="bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 lg:px-6 py-4 flex justify-between items-center">
    <div class="flex items-center space-x-3">
      <div class="bg-white bg-opacity-20 p-2 rounded-lg">
        <i class="fas fa-user-plus w-6 h-6"></i>
      </div>
      <div>
        <h1 class="text-lg lg:text-xl font-bold">Customer Portal</h1>
        <p class="text-purple-100 text-xs lg:text-sm hidden sm:block">Join our loyalty program</p>
      </div>
    </div>
    <div class="flex items-center space-x-2 lg:space-x-4">
      <a href="userdashboard.html" class="bg-white bg-opacity-20 hover:bg-white hover:bg-opacity-30 px-2 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors">
        Dashboard
      </a>
    </div>
  </header>

  <main class="p-4 lg:p-6">
    <div class="max-w-2xl mx-auto">
      <div class="bg-white rounded-lg shadow-sm p-8">
        <div class="text-center mb-8">
          <div class="bg-purple-100 p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center">
            <i class="fas fa-user-plus text-2xl text-purple-600"></i>
          </div>
          <h2 class="text-3xl font-bold text-gray-800 mb-2">Join Our Loyalty Program</h2>
          <p class="text-gray-600">Start earning points with every purchase and unlock exclusive rewards</p>
        </div>

        <form class="space-y-6" id="registrationForm">
          <div>
            <label for="fullName" class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
            <input type="text" id="fullName" name="fullName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
          </div>

          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
            <input type="email" id="email" name="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
          </div>

          <div>
            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
            <input type="tel" id="phone" name="phone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
          </div>

          <div>
            <label for="gender" class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
            <select id="gender" name="gender" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
              <option value="">Select gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div>
            <label for="birthdate" class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
            <input type="date" id="birthdate" name="birthdate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="pin" class="block text-sm font-medium text-gray-700 mb-2">Create 4-digit PIN</label>
              <input type="password" id="pin" name="pin" maxlength="4" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-center text-lg tracking-widest">
            </div>
            <div>
              <label for="confirmPin" class="block text-sm font-medium text-gray-700 mb-2">Confirm PIN</label>
              <input type="password" id="confirmPin" name="confirmPin" maxlength="4" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-center text-lg tracking-widest">
            </div>
          </div>

          <div>
            <label class="flex items-center">
              <input type="checkbox" id="terms" name="terms" required class="w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500">
              <span class="ml-3 text-sm text-gray-700">I agree to the <a href="#" class="text-purple-600 hover:underline" onclick="showTerms()">Terms and Conditions</a> and <a href="#" class="text-purple-600 hover:underline" onclick="showPrivacy()">Privacy Policy</a></span>
            </label>
          </div>

          <button type="submit" class="w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors font-medium">
            <i class="fas fa-user-plus mr-2"></i>
            Create Account
          </button>
        </form>

        <div class="mt-6 text-center">
          <p class="text-gray-600">Already have an account? <a href="customerlogin.html" class="text-purple-600 hover:underline font-medium">Sign In</a></p>
        </div>

        <div class="mt-8 p-6 bg-purple-50 rounded-lg">
          <h3 class="font-semibold text-purple-900 mb-3">Benefits of Joining:</h3>
          <ul class="space-y-2 text-purple-800">
            <li class="flex items-center"><i class="fas fa-check-circle mr-2 text-purple-600"></i> Earn 5 points for every $1 spent</li>
            <li class="flex items-center"><i class="fas fa-check-circle mr-2 text-purple-600"></i> Exclusive member-only discounts</li>
            <li class="flex items-center"><i class="fas fa-check-circle mr-2 text-purple-600"></i> Birthday rewards and special offers</li>
            <li class="flex items-center"><i class="fas fa-check-circle mr-2 text-purple-600"></i> Early access to new products</li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <div id="notificationBox" class="fixed top-8 left-1/2 transform -translate-x-1/2 z-50 hidden max-w-md w-full px-6 py-4 rounded-lg shadow-lg text-white text-center transition-all duration-300"></div>

  <!-- Modals -->
  <!-- Existing modals remain unchanged -->

  <!-- Scripts -->
  <script>
    const notificationBox = document.getElementById('notificationBox');
    function showNotification(type, message) {
      notificationBox.className = 'fixed top-8 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full px-6 py-4 rounded-lg shadow-lg text-white text-center transition-all duration-300 ' + (type === 'success' ? 'bg-green-600' : 'bg-red-600');
      notificationBox.textContent = message;
      notificationBox.classList.remove('hidden');
      setTimeout(() => {
        notificationBox.classList.add('hidden');
      }, 4000);
    }

    document.getElementById('pin').addEventListener('input', function(e) {
      this.value = this.value.replace(/[^0-9]/g, '');
    });

    document.getElementById('confirmPin').addEventListener('input', function(e) {
      this.value = this.value.replace(/[^0-9]/g, '');
    });

    document.getElementById('registrationForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const fullName = document.getElementById('fullName').value;
      const email = document.getElementById('email').value;
      const phoneNumber = document.getElementById('phone').value;
      const gender = document.getElementById('gender').value;
      const birthdate = document.getElementById('birthdate').value;
      const pin = document.getElementById('pin').value;
      const confirmPin = document.getElementById('confirmPin').value;

      if (pin !== confirmPin) {
        showNotification('error', 'PINs do not match. Please try again.');
        return;
      }

      if (pin.length !== 4) {
        showNotification('error', 'PIN must be exactly 4 digits.');
        return;
      }

      const payload = {
        fullName,
        phoneNumber,
        email,
        gender,
        pinCode: pin,
        birthdate
      };

      try {
        const response = await fetch('https://test.freedomprocessing3.com/api/customers', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();

        if (result.success) {
          showNotification('success', 'Registration successful! Redirecting...');
          setTimeout(() => {
            window.location.href = 'customerlogin.html';
          }, 2000);
        } else {
          showNotification('error', result.message || 'Registration failed.');
        }
      } catch (error) {
        showNotification('error', 'An error occurred. Please try again.');
        console.error(error);
      }
    });

    function showTerms() {
      document.getElementById('termsModal').classList.remove('hidden');
      document.getElementById('termsModal').classList.add('flex');
    }

    function closeTerms() {
      document.getElementById('termsModal').classList.add('hidden');
      document.getElementById('termsModal').classList.remove('flex');
    }

    function showPrivacy() {
      document.getElementById('privacyModal').classList.remove('hidden');
      document.getElementById('privacyModal').classList.add('flex');
    }

    function closePrivacy() {
      document.getElementById('privacyModal').classList.add('hidden');
      document.getElementById('privacyModal').classList.remove('flex');
    }
  </script>
  <!-- Terms and Conditions Modal -->
<div id="termsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white max-w-lg w-full p-6 rounded-lg shadow-lg relative">
    <button onclick="closeTerms()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl">&times;</button>
    <h2 class="text-xl font-bold text-gray-800 mb-4">Terms and Conditions</h2>
    <p class="text-gray-600 text-sm leading-relaxed">
      By joining our Loyalty Program, you agree to allow us to collect and use your personal information to enhance your shopping experience. Points are awarded only for eligible purchases and cannot be transferred or redeemed for cash. We reserve the right to modify or terminate the program at any time without prior notice. Misuse of the program may result in suspension or termination of your membership.
    </p>
  </div>
</div>

<!-- Privacy Policy Modal -->
<div id="privacyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white max-w-lg w-full p-6 rounded-lg shadow-lg relative">
    <button onclick="closePrivacy()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl">&times;</button>
    <h2 class="text-xl font-bold text-gray-800 mb-4">Privacy Policy</h2>
    <p class="text-gray-600 text-sm leading-relaxed">
      We value your privacy. Any information you provide through the loyalty registration form is stored securely and used solely to deliver program benefits such as point tracking, rewards, and personalized offers. Your data will never be sold or shared with third parties without your explicit consent, except as required by law. You may request to delete your data at any time.
    </p>
  </div>
</div>

</body>
</html>
